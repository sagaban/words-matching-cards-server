(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["add-card"],{"098f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md add-card"},[n("h4",[t._v("Add a new card")]),n("card-form",{attrs:{"tags-object":t.tags},on:{submit:t.onSubmit}})],1)},r=[],s=(n("96cf"),n("1da1")),i=n("4360"),o=n("b1ab"),c={name:"EditCard",components:{CardForm:o["a"]},beforeRouteEnter:function(t,e,n){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].dispatch("fetchTags");case 2:n();case 3:case"end":return t.stop()}}),t)})))()},computed:{tags:function(){return this.$store.state.tags}},methods:{onSubmit:function(t){this.$store.dispatch("saveNewCard",t)}}},u=c,l=(n("3b35"),n("2877")),d=Object(l["a"])(u,a,r,!1,null,"4a1d8420",null);e["default"]=d.exports},"165d":function(t,e,n){"use strict";var a=n("20b1"),r=n.n(a);r.a},1884:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md tags"},[n("q-list",{attrs:{bordered:""}},t._l(t.tagsArray,(function(e){return n("q-item",{key:e.id,staticClass:"tags__item"},[n("q-item-section",[t._v(t._s(e.name))]),n("q-item-section",{staticClass:"tags__icon-action",attrs:{avatar:""},on:{click:function(n){return t.editTag(e)}}},[n("q-icon",{attrs:{color:"indigo-4",name:"edit"}})],1),n("q-item-section",{staticClass:"tags__icon-action",attrs:{avatar:""},on:{click:function(n){return t.deleteTag(e.id)}}},[n("q-icon",{attrs:{color:"red-4",name:"delete"}})],1)],1)})),1)],1)},r=[],s=(n("fb6a"),n("b0c0"),n("5530")),i=(n("96cf"),n("1da1")),o=n("4360"),c={name:"Tags",beforeRouteEnter:function(t,e,n){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].dispatch("fetchTags");case 2:n();case 3:case"end":return t.stop()}}),t)})))()},computed:{tagsArray:function(){return this.$store.getters.tagsArray.slice().sort((function(t,e){return t.name>e.name?t.name<e.name?1:0:-1}))}},methods:{editTag:function(t){var e=this;this.$q.dialog({title:"Write tag new value",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((function(n){e.$store.dispatch("updateTag",Object(s["a"])(Object(s["a"])({},t),{},{name:n}))}))},deleteTag:function(t){var e=this;this.$q.dialog({title:"Delete",message:"Are you sure you want to delete this tag?",cancel:!0,persistent:!0}).onOk((function(){e.$store.dispatch("deleteTag",t)}))}}},u=c,l=(n("4551"),n("2877")),d=n("fe09"),f=Object(l["a"])(u,a,r,!1,null,"631b6a7b",null);e["default"]=f.exports;f.options.components=Object.assign(Object.create(f.options.components||null),f.options.components||{},{QList:d["n"],QItem:d["j"],QItemSection:d["l"],QIcon:d["h"]})},"20b1":function(t,e,n){},"3b35":function(t,e,n){"use strict";var a=n("cb7d"),r=n.n(a);r.a},4551:function(t,e,n){"use strict";var a=n("cebb"),r=n.n(a);r.a},b1ab:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-form",{ref:"cardForm",staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[n("q-input",{attrs:{filled:"",label:"Word to learn","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.word,callback:function(e){t.word=e},expression:"word"}}),n("q-input",{attrs:{filled:"",label:"Word translation","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.translation,callback:function(e){t.translation=e},expression:"translation"}}),n("q-input",{attrs:{filled:"",type:"textarea",label:"Notes","lazy-rules":""},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}}),n("q-select",{ref:"tagSelectInput",attrs:{"use-input":"","input-debounce":"0",multiple:"","use-chips":"",options:t.filteredOptions,label:"Tags"},on:{"new-value":t.createTag,filter:t.tagFilter},scopedSlots:t._u([t.showAddTagButton?{key:"append",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:t.addTagButtonHandler}})]},proxy:!0}:null],null,!0),model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),n("div",[n("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],1)},r=[],s=(n("4de4"),n("4160"),n("caad"),n("d81d"),n("fb6a"),n("b0c0"),n("ac1f"),n("2532"),n("1276"),n("498a"),n("159b"),n("5530")),i={name:"CardForm",props:{tagsObject:{type:Object,required:!0},card:{type:Object,default:function(){return null}}},data:function(){return{word:null,translation:null,notes:null,tags:[],filteredOptions:[],showAddTagButton:!1}},created:function(){var t=this;this.card&&(this.word=this.card.word,this.translation=this.card.translation,this.notes=this.card.notes,this.tags=this.card.tags.map((function(e){return t.tagsObject[e.id].name})))},computed:{tagsArray:function(){return this.$store.getters.tagsArray}},methods:{tagFilter:function(t,e){var n=this;if(""===t)return this.showAddTagButton=!1,void e((function(){n.filteredOptions=n.tagsStringArray}));this.showAddTagButton=!0,e((function(){if(n.tagsStringArray&&n.tagsStringArray.length){var e=t.toLowerCase();n.filteredOptions=n.tagsStringArray.filter((function(t){return t.toLowerCase().includes(e)}))}}))},createTag:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(t.length>0){var a=(this.tags||[]).slice();t.split(/[,;|]+/).map((function(t){return t.trim()})).filter((function(t){return t.length>0})).forEach((function(t){e.tagsStringArray.includes(t)||e.$store.dispatch("saveNewTag",{name:t}),a.includes(t)||a.push(t)})),n(a),this.tags=a}},addTagButtonHandler:function(){this.createTag(this.$refs.tagSelectInput.inputValue),this.$refs.tagSelectInput.inputValue=""},onSubmit:function(){var t=this;if(this.word&&this.translation){var e=this.tagsArray.filter((function(e){return t.tags.includes(e.name)})).map((function(t){return t.id}));this.$emit("submit",Object(s["a"])(Object(s["a"])({},this.card),{},{word:this.word,translation:this.translation,notes:this.notes,tags:e})),this.card||this.onReset()}else this.$w.notify({type:"warning",message:"'Word and Translation field are mandatory."})},onReset:function(){this.word=null,this.translation=null,this.notes=null,this.tags=[],this.$refs.cardForm.resetValidation()}}},o=i,c=n("2877"),u=n("fe09"),l=Object(c["a"])(o,a,r,!1,null,"36f59512",null);e["a"]=l.exports;l.options.components=Object.assign(Object.create(l.options.components||null),l.options.components||{},{QForm:u["f"],QInput:u["i"],QSelect:u["p"],QBtn:u["a"]})},b43e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-pa-md add-card"},[n("h4",[t._v("Edit an existing card")]),n("card-form",{attrs:{"tags-object":t.tags,card:t.card},on:{submit:t.onSubmit}})],1)},r=[],s=(n("a9e3"),n("96cf"),n("1da1")),i=n("4360"),o=n("b1ab"),c={name:"EditCard",components:{CardForm:o["a"]},props:{id:{type:Number,required:!0}},beforeRouteEnter:function(t,e,n){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].dispatch("fetchTags");case 2:return e.next=4,i["a"].dispatch("fetchCard",t.params.id);case 4:n();case 5:case"end":return e.stop()}}),e)})))()},computed:{tags:function(){return this.$store.state.tags},card:function(){return this.$store.state.cards[this.id]}},methods:{onSubmit:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("updateCard",t);case 3:window.history.back(),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.error("There was an error ");case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}}},u=c,l=(n("165d"),n("2877")),d=Object(l["a"])(u,a,r,!1,null,"40663724",null);e["default"]=d.exports},cb7d:function(t,e,n){},cebb:function(t,e,n){}}]);
//# sourceMappingURL=add-card.cf2d87dd.js.map